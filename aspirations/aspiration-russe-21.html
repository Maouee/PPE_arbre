<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <title>Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0da14ebf.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.4885d89d.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.7c4d9bf6.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.00f967f9.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/js/8838.01bea32e.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0da14ebf.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.7c4d9bf6.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.ba207f862e5abf511408aebb96f765b4.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/companies\/ruvds\/articles\/415269\/"},"headline":"Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация","datePublished":"2018-06-26T11:42:23+03:00","dateModified":"2020-05-17T14:16:39+03:00","author":{"@type":"Person","name":"ru_vds"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"[Советуем почитать] Другие 19 частей цикла                         Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Ч...","url":"https:\/\/habr.com\/ru\/companies\/ruvds\/articles\/415269\/#post-content-body","about":["c_ruvds","h_webdev","h_javascript","f_develop"],"image":["https:\/\/habrastorage.org\/getpro\/habr\/post_images\/68b\/b2c\/231\/68bb2c231dd5b82bd35e97ceb36becef.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/1ce\/cdb\/e7c\/1cecdbe7c1c1b12fc4b47994e85a443c.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/38e\/f77\/c59\/38ef77c59ab8118513c901e8d76a473e.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/13a\/a77\/456\/13aa774565ef8c320d2cfbac32476a45.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/4c1\/de3\/225\/4c1de32251846a5a0416980c3187ff61.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/729\/2cf\/4ef\/7292cf4efde90158123451af4f487b1e.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/15e\/e9f\/761\/15ee9f761e509f1b578fdddcd56800eb.png","https:\/\/habrastorage.org\/files\/1ba\/550\/d25\/1ba550d25e8846ce8805de564da6aa63.png"]}</script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.159.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="[Советуем почитать] Другие 19 частей цикла Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Часть 2: О внутреннем устройстве V8 и оптимизации кода Часть 3: Управление памятью,..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="[Советуем почитать] Другие 19 частей цикла Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Часть 2: О внутреннем устройстве V8 и оптимизации кода Часть 3: Управление памятью,..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="[Советуем почитать] Другие 19 частей цикла Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Часть 2: О внутреннем устройстве V8 и оптимизации кода Часть 3: Управление памятью,..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="[Советуем почитать] Другие 19 частей цикла Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Часть 2: О внутреннем устройстве V8 и оптимизации кода Часть 3: Управление памятью,..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="[Советуем почитать] Другие 19 частей цикла Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Часть 2: О внутреннем устройстве V8 и оптимизации кода Часть 3: Управление памятью,..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/415269/18ab65b3b496fe3452e1d36a1d3940a3/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/415269/18ab65b3b496fe3452e1d36a1d3940a3/" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/415269/18ab65b3b496fe3452e1d36a1d3940a3/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/415269/18ab65b3b496fe3452e1d36a1d3940a3/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/415269/18ab65b3b496fe3452e1d36a1d3940a3/?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="415269" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2018-06-26T08:42:23.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/companies/ruvds/articles/415269/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="JavaScript, разработка">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/publications/415269/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/companies/ruvds/articles/415269/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" rel="image_src" href="https://habr.com/share/publication/415269/18ab65b3b496fe3452e1d36a1d3940a3/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo tm-header__logo_hl-ru tm-header__logo_ny"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 66 30" class="tm-header__icon"><path fill="#fff" d="M16.3 3.6h-4.2L8.2 9.7 4.4 3.6H0l5.8 9-5.8 9h4.3l3.8-6.3 3.9 6.3h4.3l-5.8-9 5.8-9zm7.4 4.8c-3.4 0-5.3 2-5.7 4.2h3.4c.2-.7.8-1.4 2.1-1.4s2.1.6 2.1 1.8v.6h-2.8c-3.3 0-5.3 1.5-5.3 4.2s2 4.1 4.5 4.1 3-.6 3.8-1.7v1.4h3.4v-8.5c0-3.1-2.2-4.8-5.5-4.8zm2 8.4c0 1.5-1.2 2.3-2.6 2.3s-1.8-.5-1.8-1.4.8-1.5 1.9-1.5h2.5v.6zm13.7-7.9c-1.8 0-3.3.7-4.2 2 .2-2.4 1.2-3.6 3.7-4l4.6-.7V3l-5 .9c-5.1.8-6.7 4.2-6.7 9.9s2.5 8.1 6.8 8.1 6.4-3 6.4-6.6-2.2-6.4-5.6-6.4zm-.9 10c-1.9 0-3-1.5-3-3.6s1.1-3.4 3-3.4 2.8 1.5 2.8 3.4-1 3.5-2.9 3.5zM54.8 8.4c-1.9 0-3.1.8-3.8 1.8V8.6h-3.5v18h3.7v-6.2c.7.9 1.9 1.5 3.5 1.5 3.2 0 5.7-2.5 5.7-6.8s-2.5-6.8-5.6-6.8zm-.9 10.4c-1.7 0-2.8-1.4-2.8-3.6 0-2.3 1.1-3.7 2.8-3.7s2.8 1.4 2.8 3.6-1.1 3.6-2.8 3.6z"></path><path fill="url(#a)" d="M56.7.8c5 0 6.3 3.7 6.3 4.7-3-2-6.5 1.5-6.5 1.5s.2-4.2.2-6.2z"></path><linearGradient id="a" x1="63" x2="56.5" y1="1" y2="1" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#e84256"></stop><stop offset="1" stop-color="#ab1427"></stop></linearGradient><path fill="#b8d5ff" d="M65 6.1c-.3 1.1-1.4 1.7-2.5 1.4-1.1-.3-1.7-1.4-1.4-2.5s1.4-1.7 2.5-1.4c1.1.3 1.7 1.4 1.4 2.5z"></path><path fill="#e84256" d="M55.3 1.1c1.1-.8 2.8-.3 3.3.9l4.1 10.5c.6 1.6-.9 3.1-2.5 2.6l-13.3-3.8c-1.7-.5-2.1-2.6-.7-3.5l9.2-6.7z"></path><path fill="#d1e4ff" d="M62.3 11.6L47 7.2l-.8.6c-1.4 1-.9 3.1.7 3.5l13.3 3.8c1.7.5 3.1-1.1 2.5-2.6l-.4-.9z"></path></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v28.faec9762..svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><a href="/ru/feed/" class="tm-main-menu__item">
        Моя лента
      </a> <a href="/ru/articles/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v28.faec9762..svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark"><title>Настройки</title> <use xlink:href="/img/megazord-v28.faec9762..svg#page-settings"></use></svg></button></div> <a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/ruvds/articles/415269/&amp;hl=ru" rel="nofollow" class="tm-header-user-menu__item"><button type="button" class="tm-header-user-menu__login btn btn_solid btn_small">
        Войти
      </button></a> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="ruvds" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><div class="tm-company-card__branding tm-company-article__branding tm-company-card__branding_loading"><div class="tm-company-card__branding-placeholder"><!----></div> <a href="https://ruvds.com/?utm_source=habr&amp;utm_medium=banner&amp;utm_campaign=promo&amp;utm_content=link&amp;?erid=LjN8KAR3S"><img src="//habrastorage.org/getpro/habr/branding/46f/1af/202/46f1af202dfd0682dd9ed2ff031f342b.jpg" width="100%" class="tm-company-card__branding-image"></a></div></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!----> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__icon pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v28.faec9762..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><!----> <div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a href="/ru/companies/ruvds/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt height="48" src="//habrastorage.org/getpro/habr/company/a8a/d05/1a5/a8ad051a528365eeade6c64624231202.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
          3071.55
        </span></span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div> <!----></div> <div class="tm-company-card__info"><a href="/ru/companies/ruvds/profile/" class="tm-company-card__name">RUVDS.com</a> <div class="tm-company-card__description">VDS/VPS-хостинг. Скидка 15% по коду <b>HABR15</b></div></div></div> <!----></div> <!----> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/ru_vds/" title="ru_vds" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt height="24" src="//habrastorage.org/r/w48/getpro/habr/avatars/401/2df/cf0/4012dfcf007db186f14ef2c1eb32d672.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user tm-user-info__user_appearance-default"><a href="/ru/users/ru_vds/" class="tm-user-info__username">
      ru_vds
      <!----></a> <span class="tm-article-datetime-published"><time datetime="2018-06-26T08:42:23.000Z" title="2018-06-26, 11:42">26  июн  2018 в 11:42</time></span></span></span></div> <!----></div> <h1 lang="ru" class="tm-title tm-title_h1"><span>Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация</span></h1> <div class="tm-article-snippet__stats"><!----> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.faec9762..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    16 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">42K</span></span></div> <div class="tm-publication-hubs__container"><div class="tm-publication-hubs"><span class="tm-publication-hub__link-container"><a href="/ru/companies/ruvds/articles/" class="router-link-active tm-publication-hub__link"><span>Блог компании RUVDS.com</span> <!----></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/webdev/" class="tm-publication-hub__link"><span>Веб-разработка</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/javascript/" class="tm-publication-hub__link"><span>JavaScript</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div></div> <div class="tm-article-labels"><div class="tm-article-labels__container"><!----> <div class="tm-publication-label tm-publication-label_variant-translation"><span>
    Перевод
  </span></div></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://blog.sessionstack.com/how-javascript-works-parsing-abstract-syntax-trees-asts-5-tips-on-how-to-minimize-parse-time-abfcf7e8a0c8" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Lachezar Nickolov
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">[Советуем почитать] Другие 19 частей цикла</b>
                        <div class="spoiler_text">Часть 1: <a href="https://habrahabr.ru/company/ruvds/blog/337042/">Обзор движка, механизмов времени выполнения, стека вызовов</a><br/>
Часть 2: <a href="https://habrahabr.ru/company/ruvds/blog/337460/">О внутреннем устройстве V8 и оптимизации кода</a><br/>
Часть 3: <a href="https://habrahabr.ru/company/ruvds/blog/338150/">Управление памятью, четыре вида утечек памяти и борьба с ними</a><br/>
Часть 4: <a href="https://habrahabr.ru/company/ruvds/blog/340508/">Цикл событий, асинхронность и пять способов улучшения кода с помощью async / await</a><br/>
Часть 5: <a href="https://habrahabr.ru/company/ruvds/blog/342346/">WebSocket и HTTP/2+SSE. Что выбрать?</a><br/>
Часть 6: <a href="https://habrahabr.ru/company/ruvds/blog/343568/">Особенности и сфера применения WebAssembly</a><br/>
Часть 7: <a href="https://habrahabr.ru/company/ruvds/blog/348424/">Веб-воркеры и пять сценариев их использования</a><br/>
Часть 8: <a href="https://habrahabr.ru/company/ruvds/blog/349858/">Сервис-воркеры</a><br/>
Часть 9: <a href="https://habrahabr.ru/company/ruvds/blog/350486/">Веб push-уведомления</a><br/>
Часть 10: <a href="https://habrahabr.ru/company/ruvds/blog/351256/">Отслеживание изменений в DOM с помощью MutationObserver</a><br/>
Часть 11: <a href="https://habrahabr.ru/company/ruvds/blog/351802/">Движки рендеринга веб-страниц и советы по оптимизации их производительности</a><br/>
Часть 12: <a href="https://habr.com/company/ruvds/blog/354070/">Сетевая подсистема браузеров, оптимизация её производительности и безопасности</a><br/>
Часть 13: <a href="https://habr.com/company/ruvds/blog/354438/">Анимация средствами CSS и JavaScript</a><br/>
Часть 14: <a href="https://habr.com/company/ruvds/blog/415269/">Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация</a><br/>
Часть 15: <a href="https://habr.com/company/ruvds/blog/415377/">Как работает JS: классы и наследование, транспиляция в Babel и TypeScript</a><br/>
Часть 16: <a href="https://habr.com/company/ruvds/blog/415505/">Как работает JS: системы хранения данных</a><br/>
Часть 17: <a href="https://habr.com/company/ruvds/blog/415881/">Как работает JS: технология Shadow DOM и веб-компоненты</a><br/>
Часть 18: <a href="https://habr.com/company/ruvds/blog/416821/">Как работает JS: WebRTC и механизмы P2P-коммуникаций</a><br/>
Часть 19: <a href="https://habr.com/company/ruvds/blog/419831/">Как работает JS: пользовательские элементы</a></div>
                    </div><br/>
Все мы знаем о том, что JavaScript-код веб-проектов может разрастаться до прямо-таки огромных размеров. А чем больше размер кода — тем дольше браузер будет его загружать. Но проблема тут не только во времени передачи данных по сети. После того, как программа загрузится, её ещё надо распарсить, скомпилировать в байт-код, и, наконец, выполнить. Сегодня мы представляем вашему вниманию перевод 14 части серии материалов об экосистеме JavaScript. А именно, речь пойдёт о синтаксическом анализе JS-кода, о том, как строятся абстрактные синтаксические деревья, и о том, как программист может повлиять на эти процессы, добившись повышения скорости работы своих приложений.<br/>
<br/>
<a href="https://habr.com/company/ruvds/blog/415269/"><img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/68b/b2c/231/68bb2c231dd5b82bd35e97ceb36becef.jpg" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/68b/b2c/231/68bb2c231dd5b82bd35e97ceb36becef.jpg" data-blurred="true"/></a><br/>
<a name="habracut"></a><br/>
<h2><font color="#3AC1EF">Как устроены языки программирования</font></h2><br/>
Прежде чем говорить об абстрактных синтаксических деревьях, остановимся на том, как устроены языки программирования. Вне зависимости от того, какой именно язык вы используете, вам всегда приходится применять некие программы, которые принимают исходный код и преобразуют его в нечто такое, что содержит конкретные команды для машин. В роли таких программ выступают либо интерпретаторы, либо компиляторы. Неважно, пишете ли вы на интерпретируемом языке (JavaScript, Python, Ruby), или на компилируемом (C#, Java, Rust), ваш код, представляющий собой обычный текст, всегда будет проходить этап парсинга, то есть — превращения обычного текста в структуру данных, которая называется абстрактным синтаксическим деревом (Abstract Syntax Tree, AST).<br/>
<br/>
Абстрактные синтаксические деревья не только дают структурированное представление исходного кода, они, кроме того, играют важнейшую роль в семантическом анализе, в ходе которого компилятор проверяет правильность программных конструкций и корректность использования их элементов. После формирования AST и выполнения проверок эта структура используется для генерирования байт-кода или машинного кода.<br/>
<br/>
<h2><font color="#3AC1EF">Применение абстрактных синтаксических деревьев</font></h2><br/>
Абстрактные синтаксические деревья используются не только в интерпретаторах и компиляторах. Они, в мире компьютеров, оказываются полезными и во многих других областях. Один из наиболее часто встречающихся вариантов их применения — статический анализ кода. Статические анализаторы не выполняют передаваемый им код. Однако, несмотря на это, им нужно понимать структуру программ.<br/>
<br/>
Предположим, вы хотите разработать инструмент, который находит в коде часто встречающиеся структуры. Отчёты такого инструмента помогут в рефакторинге, позволят уменьшить дублирование кода. Сделать это можно, пользуясь обычным сравнением строк, но такой подход окажется весьма примитивным, возможности его будут ограниченными. На самом деле, если вы хотите создать подобный инструмент, вам не нужно писать собственный парсер для JavaScript. Существует множество опенсорсных реализаций подобных программ, которые полностью совместимы со спецификацией ECMAScript. Например — Esprima и Acorn. Существуют и инструменты, которые могут помочь в работе с тем, что генерируют парсеры, а именно, в работе с абстрактными синтаксическими деревьями. <br/>
<br/>
Абстрактные синтаксические деревья, кроме того, широко используются при разработке транспиляторов. Предположим, вы решили разработать транспилятор, преобразующий код на Python в код на JavaScript. Подобный проект может быть основан на идее, в соответствии с которой используется транспилятор для создания абстрактного синтаксического дерева на основе Python-кода, которое, в свою очередь, преобразуется в код на JavaScript. Вероятно, тут вы зададитесь вопросом о том, как такое возможно. Всё дело в том, что абстрактные синтаксические деревья — это всего лишь альтернативный способ представления кода на некоем языке программирования. Прежде чем код преобразуется в AST, он выглядит как обычный текст, при написании которого следуют определённым правилам, которые формируют язык. После парсинга этот код превращается в древовидную структуру, которая содержит ту же информацию, что и исходный текст программы. В результате можно осуществить не только переход от исходного кода к AST, но и обратное преобразование, превратив абстрактное синтаксическое дерево в текстовое представление кода программы.<br/>
<br/>
<h2><font color="#3AC1EF">Парсинг JavaScript-кода</font></h2><br/>
Поговорим о том, как строятся абстрактные синтаксические деревья. В качестве примера рассмотрим простую JavaScript-функцию:<br/>
<br/>
<pre><code class="plaintext">function foo(x) {
    if (x > 10) {
        var a = 2;
        return a * x;
    }

    return x + 10;
}</code></pre><br/>
Парсер создаст абстрактное синтаксическое дерево, которое схематично представлено на следующем рисунке.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/1ce/cdb/e7c/1cecdbe7c1c1b12fc4b47994e85a443c.png" data-src="https://habrastorage.org/getpro/habr/post_images/1ce/cdb/e7c/1cecdbe7c1c1b12fc4b47994e85a443c.png"/></div><br/>
<i><font color="#999999">Абстрактное синтаксическое дерево</font></i><br/>
<br/>
Обратите внимание на то, что это — упрощённое представление результатов работы парсера. Настоящее абстрактное синтаксическое дерево выглядит гораздо сложнее. В данном случае наша главная цель — получить представление о том, во что, в первую очередь, превращается исходный код прежде чем он будет выполнен. Если вам интересно взглянуть на то, как выглядит реальное абстрактное синтаксическое дерево — воспользуйтесь сайтом <a href="https://astexplorer.net/">AST Explorer</a>. Для того, чтобы сгенерировать AST для некоего фрагмента JS-кода, его достаточно поместить в соответствующее поле на странице.<br/>
<br/>
Возможно, тут у вас возникнет вопрос о том, зачем программисту знать о том, как работает JS-парсер. В конце концов, парсить и выполнять код — это задача браузера. В каком-то смысле вы правы. На рисунке ниже показаны затраты времени, требующиеся некоторым известным веб-проектам на выполнение различных шагов в процессе выполнения JS-кода.<br/>
<br/>
Присмотритесь к этому рисунку, возможно, вы увидите там кое-что интересное.<br/>
<br/>
<a href="https://lh5.googleusercontent.com/BqI2_WWk6ZGChdJPvMfxadXNLROXz8AieUiIGQahSnw46K0yQngJ7GfVGFSEUOQRIhLWJWRxXMPXQezeKpvnXVvQp5OcD_6jKslg-X8KiepJvDXt9CBprSCZO2oux7FLXFuFJ_-WWuW10mJx4Q"><div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/38e/f77/c59/38ef77c59ab8118513c901e8d76a473e.png" data-src="https://habrastorage.org/getpro/habr/post_images/38e/f77/c59/38ef77c59ab8118513c901e8d76a473e.png"/></div></a><br/>
<i><font color="#999999">Временные затраты на выполнение JS-кода</font></i><br/>
<br/>
Видите? Если нет — посмотрите ещё раз. Собственно говоря, речь идёт о том, что, в среднем, браузеры тратят 15-20% времени на парсинг JS-кода. И это — не некие условные данные. Перед вами — статистические сведения о работе реальных веб-проектов, которые так или иначе используют JavaScript. Возможно, показатель в 15% может показаться вам не таким уж и большим, но, поверьте, это много. Типичное одностраничное приложение загружает примерно 0.4 Мб JavaScript-кода, а чтобы распарсить этот код браузеру надо примерно 370 мс. Опять же, вы можете сказать, что в этом нет ничего страшного. И да, само по себе это немного. Однако не стоит забывать о том, что это — лишь время, которое нужно на то, чтобы разобрать код и превратить его в AST. Сюда не входит время, необходимое на выполнение кода, или время, которое нужно на решение других задач, сопутствующих загрузке страницы, например — задач обработки HTML и CSS и <a href="https://habr.com/company/ruvds/blog/351802/">рендеринга страницы</a>. Причём, речь тут идёт лишь о настольных браузерах. В случае с мобильными системами всё ещё хуже. В частности, время парсинга одного и того же кода на мобильных устройствах может быть в 2-5 раз больше, чем на настольных. Взгляните на следующий рисунок.<br/>
<br/>
<a href="https://lh3.googleusercontent.com/KBomjEemha-HSV2unKD-mdpJVMD3UrGZgjZ9iwDLe9xrWxKplHberV72A4WZbTjXvtXwDpZ_12ewJmXXyfG5xSxIYKqQODV4P69ePr4PccJ5ENEOCtuZAgPlfK6YcxlYM0vg_uJZr4MwKRfZNw"><div style="text-align:center;"><img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/13a/a77/456/13aa774565ef8c320d2cfbac32476a45.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/13a/a77/456/13aa774565ef8c320d2cfbac32476a45.jpg" data-blurred="true"/></div></a><br/>
<i><font color="#999999">Время парсинга 1 Мб JS-кода на различных устройствах</font></i><br/>
<br/>
Здесь показано время, необходимое для разбора 1 Мб JS-кода на различных мобильных и настольных устройствах.<br/>
<br/>
Кроме того, веб-приложения постоянно усложняются, на сторону клиента переносится решение всё большего количества задач. Направлено всё это на то, чтобы улучшить ощущения пользователей от работы с веб-сайтами, чтобы приблизить эти ощущения к тем, которые пользователи испытывают, взаимодействуя с традиционными приложениями. Несложно выяснить то, насколько сильно всё это воздействует на веб-проекты. Для этого достаточно открыть в браузере инструменты разработчика, зайти на какой-нибудь современный сайт и посмотреть, сколько времени тратится на парсинг кода, на компиляцию, и на всё остальное, происходящее в браузере при подготовке страницы к работе.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/4c1/de3/225/4c1de32251846a5a0416980c3187ff61.jpg" data-src="https://habrastorage.org/getpro/habr/post_images/4c1/de3/225/4c1de32251846a5a0416980c3187ff61.jpg" data-blurred="true"/></div><br/>
<i><font color="#999999">Анализ сайта с помощью инструментов разработчика в браузере</font></i><br/>
<br/>
К несчастью, мобильные браузеры не обладают подобными инструментами. Однако, это не означает, что мобильные версии сайтов невозможно анализировать. Тут нам на помощь придут инструменты вроде <a href="https://github.com/danielmendel/DeviceTiming">DeviceTiming</a>. С помощью DeviceTiming можно измерить время, необходимое для парсинга и выполнения скриптов в управляемых окружениях. Работает это благодаря помещению локальных скриптов в окружение, формируемое вспомогательным кодом, что приводит к тому, что каждый раз, когда страница загружается с различных устройств, у нас появляется возможность локально измерить время парсинга и выполнения кода.<br/>
<br/>
<h2><font color="#3AC1EF">Оптимизация парсинга и JS-движки</font></h2><br/>
JS-движки делают много полезного для того, чтобы избежать ненужной работы и оптимизировать процессы обработки кода. Вот несколько примеров.<br/>
<br/>
Движок V8 поддерживает потоковую передачу скриптов и кэширование кода. Под потоковой передачей в данном случае понимается то, что система занимается парсингом скриптов, загружающихся асинхронно, и скриптов, выполнение которых отложено, в отдельном потоке, начиная это делать с момента начала загрузки кода. Это ведёт к тому, что парсинг завершается практически одновременно с завершением загрузки скрипта, что даёт примерно 10% уменьшение времени, необходимого на подготовку страниц к работе.<br/>
<br/>
JavaScript-код обычно компилируется в байт-код при каждом посещении страницы. Этот байт-код, однако, теряется после того, как пользователь переходит на другую страницу. Происходит это из-за того, что скомпилированный код сильно зависит от состояния и контекста системы во время компиляции. Для того чтобы улучшить ситуацию в Chrome 42 появилась поддержка кэширования байт-кода. Благодаря этому новшеству скомпилированный код хранится локально, в результате, когда пользователь возвращается на уже посещённую страницу, для подготовки её к работе не нужно выполнять загрузку, парсинг и компиляцию скриптов. Это позволяет Chrome сэкономить примерно 40% времени на задачах парсинга и компиляции. Кроме того, в случае с мобильными устройствами, это ведёт к экономии заряда их аккумуляторов.<br/>
<br/>
Движок <a href="https://dev.opera.com/blog/carakan/">Carakan</a>, который применялся в браузере Opera и уже довольно давно заменён на V8, мог повторно использовать результаты компиляции уже обработанных скриптов. При этом не требовалось, чтобы эти скрипты были бы подключены к одной и той же странице или даже были бы загружены с одного домена. Эта техника кэширования, на самом деле, весьма эффективна и позволяет полностью отказаться от шага компиляции. Она полагается на типичные сценарии поведения пользователей, на то, как люди работают с веб-ресурсами. А именно, когда пользователь следует определённой последовательности действий, работая с веб-приложением, загружается один и тот же код.<br/>
<br/>
Интерпретатор <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey">SpiderMonkey</a>, используемый в FireFox, не занимается кэшированием всего подряд. Он поддерживает систему мониторинга, которая подсчитывает количество вызовов определённого скрипта. На основе этих показателей определяются участки кода, которые нуждаются в оптимизации, то есть — те, на которые приходится максимальная нагрузка.<br/>
<br/>
Конечно, некоторые разработчики браузеров могут решить, что кэширование их продуктам и вовсе не нужно. Так, <a href="http://en.wikipedia.org/wiki/Maciej_Stachowiak">Масей Стачовяк</a>, ведущий разработчик браузера Safari, говорит, что Safari не занимается кэшированием скомпилированного байт-кода. Возможность кэширования рассматривалась, но она до сих пор не реализована, так как генерация кода занимает менее 2% общего времени выполнения программ.<br/>
<br/>
Эти оптимизации не влияют напрямую на парсинг исходного кода на JS. В ходе их применения делается всё возможное, чтобы, в определённых случаях, полностью пропустить этот шаг. Каким бы быстрым ни был парсинг, он, всё же, занимает некоторое время, а полное отсутствие парсинга — это, пожалуй, пример идеальной оптимизации.<br/>
<br/>
<h2><font color="#3AC1EF">Сокращение времени подготовки веб-приложений к работе</font></h2><br/>
Как мы выяснили выше, хорошо было бы свести необходимость в парсинге скриптов к минимуму, но совсем избавиться от него нельзя, поэтому поговорим о том, как сократить время, необходимое для подготовки веб-приложений к работе. На самом деле, для этого можно сделать очень много всего. Например, можно минимизировать объём JS-кода, входящего в приложение. Код маленького объёма, готовящий страницу к работе, можно быстрее разобрать, да и его выполнение, вероятнее всего, займёт меньше времени, чем у кода более объёмного.<br/>
<br/>
Для того чтобы сократить объём кода, можно организовать загрузку на страницу только того, что ей действительно необходимо, а не некоего огромного куска кода, в который входит абсолютно всё, нужное для веб-проекта в целом. Так, например, паттерн <a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/">PRPL</a> продвигает именно такой подход к загрузке кода. В качестве альтернативного варианта можно проверить зависимости и посмотреть, есть ли в них что-то избыточное, такое, что приводит лишь к неоправданному разрастанию кодовой базы. На самом деле, тут мы затронули большую тему, достойную отдельного материала. Вернёмся к парсингу.<br/>
<br/>
Итак, цель данного материала заключается в обсуждении методик, позволяющих веб-разработчику помочь парсеру быстрее делать его работу. Такие методики существуют. Современные JS-парсеры используют эвристические алгоритмы для того, чтобы определить, понадобится ли выполнить некий фрагмент кода как можно скорее, или его нужно будет выполнить позже. Основываясь на этих предсказаниях, парсер либо полностью анализирует фрагмент кода, применяя алгоритм жадного синтаксического анализа (eager parsing), либо использует ленивый алгоритм синтаксического анализа (lazy parsing). При полном анализе разбираются функции, которые нужно скомпилировать как можно скорее. В ходе этого процесса выполняется решение трёх основных задач: построение AST, создание иерархии областей видимости и поиск синтаксических ошибок. Ленивый анализ, с другой стороны, используется только для функций, которые пока не нуждаются в компиляции. Здесь не создаётся AST и не выполняется поиск ошибок. При таком подходе лишь создаётся иерархия областей видимости, что позволяет сэкономить примерно половину времени в сравнении с обработкой функций, которые нужно выполнить как можно скорее.<br/>
<br/>
На самом деле, концепция это не новая. Даже устаревшие браузеры вроде IE9 поддерживают подобные подходы к оптимизации, хотя, конечно, современные системы ушли далеко вперёд.<br/>
<br/>
Разберём пример, иллюстрирующий работу этих механизмов. Предположим, у нас имеется следующий JS-код:<br/>
<br/>
<pre><code class="plaintext">function foo() {
    function bar(x) {
        return x + 10;
    }

    function baz(x, y) {
        return x + y;
    }

    console.log(baz(100, 200));
}</code></pre><br/>
Как и в предыдущем примере, код попадает в парсер, который выполняет его синтаксический анализ и формирует AST. В результате парсер представляет код, состоящий из следующих основных частей (на функцию <code>foo</code> обращать внимания не будем):<br/>
<br/>
<ul>
<li>Объявление функции <code>bar</code>, которая принимает один аргумент (<code>x</code>). Эта функция имеет одну команду возврата, она возвращает результат сложения <code>x</code> и 10.</li>
<li>Объявление функции <code>baz</code>, которая принимает два аргумента (<code>x</code> и <code>y</code>). У неё тоже одна команда возврата, возвращает она результат сложения <code>x</code> и <code>y</code>.</li>
<li>Выполнение вызова функции <code>baz</code> с двумя аргументами — 100 и 200.</li>
<li>Выполнение вызова функции <code>console.log</code> с одним аргументом, которым является значение, возвращённое ранее вызванной функцией.</li>
</ul><br/>
Вот как это выглядит.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/729/2cf/4ef/7292cf4efde90158123451af4f487b1e.png" data-src="https://habrastorage.org/getpro/habr/post_images/729/2cf/4ef/7292cf4efde90158123451af4f487b1e.png"/></div><br/>
<i><font color="#999999">Результат разбора кода примера без применения оптимизации</font></i><br/>
<br/>
Поговорим о том, что здесь происходит. Парсер видит объявление функции <code>bar</code>, объявление функции <code>baz</code>, вызов функции <code>baz</code> и вызов функции <code>console.log</code>. Очевидно, разбирая этот фрагмент кода, парсер столкнётся с задачей, выполнение которой никак не отразится на результатах выполнения данной программы. Речь идёт об анализе функции <code>bar</code>. Почему анализ этой функции не несёт практической пользы? Всё дело в том, что функция <code>bar</code>, как минимум, в представленном фрагменте кода, никогда не вызывается. Этот простой пример может показаться надуманным, но во множестве реальных приложений имеется большое количество функций, которые никогда не вызываются.<br/>
<br/>
В подобной ситуации, вместо того, чтобы заниматься разбором функции <code>bar</code>, мы можем просто сделать запись о том, что она объявлена, но нигде не используется. При этом настоящий парсинг этой функции производится тогда, когда в ней возникнет необходимость, непосредственно перед её выполнением. Естественно, при выполнении ленивого синтаксического анализа нужно обнаружить тело функции и сделать запись о её объявлении, но на этом работа заканчивается. Для такой функции не надо формировать абстрактное синтаксическое дерево, так как у системы нет сведений о том, что эту функцию планируется выполнять. Кроме того, не выделяется память из кучи, что обычно требует немалых системных ресурсов. Если в двух словах, то отказ от разбора ненужных функций ведёт к значительному повышению производительности кода.<br/>
<br/>
В результате, в предыдущем примере, настоящий парсер сформирует структуру, напоминающую следующую схему.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/15e/e9f/761/15ee9f761e509f1b578fdddcd56800eb.png" data-src="https://habrastorage.org/getpro/habr/post_images/15e/e9f/761/15ee9f761e509f1b578fdddcd56800eb.png"/></div><br/>
<i><font color="#999999">Результат разбора кода примера с оптимизацией</font></i><br/>
<br/>
Обратите внимание на то, что парсер сделал запись об объявлении функции <code>bar</code>, но дальнейшим её разбором не занимался. Система не предприняла никаких усилий для анализа кода функции. В данном случае тело функции представляло собой команду возврата результата простых вычислений. Однако в большинстве реальных приложений код функций может быть гораздо более длинным и сложным, содержащим множество команд возврата, условия, циклы, команды объявления переменных и вложенных функций. Разбор всего этого, при условии, что такие функции никогда не вызываются, представляет собой пустую трату времени.<br/>
<br/>
В вышеописанной концепции нет ничего сложного, но её практическая реализация — задача не из лёгких. Здесь мы рассмотрели очень простой пример, а, на самом деле, при принятии решения о том, будет ли некий фрагмент кода востребован в программе, нужно анализировать и функции, и циклы, и условные операторы, и объекты. В целом можно сказать, что парсеру нужно обработать и проанализировать абсолютно всё, что есть в программе.<br/>
<br/>
Вот, например, весьма распространённый паттерн реализации модулей в JavaScript:<br/>
<br/>
<pre><code class="plaintext">var myModule = (function() {
    // Вся логика модуля
    // Возврат объекта модуля
})();</code></pre><br/>
Большинство современных JS-парсеров распознают этот паттерн, он для них является сигналом того, что код, расположенный внутри модуля, нужно полностью проанализировать.<br/>
<br/>
А что если бы парсеры всегда использовали ленивый синтаксический анализ? Это, к сожалению, не самая хорошая идея. Дело в том, что при таком подходе, если некий код надо выполнить как можно скорее, мы столкнёмся с замедлением работы системы. Парсер выполнит один проход ленивого синтаксического анализа, после чего тут же примется за полный анализ того, что нужно выполнить как можно скорее. Это приведёт к примерно 50% замедлению в сравнении с подходом, когда парсер сразу приступает к полному разбору самого важного кода.<br/>
<br/>
<h2><font color="#3AC1EF">Оптимизация кода с учётом особенностей его разбора</font></h2><br/>
Теперь, когда мы немного разобрались с тем, что происходит в недрах парсеров, пришло время подумать о том, что можно сделать для того, чтобы им помочь. Мы можем писать код так, чтобы синтаксический анализ функций производился в нужное нам время. Тут существует один паттерн, который понимают большинство парсеров. Он выражается в том, что функции заключают в скобки. Такая конструкция практически всегда сообщает парсеру о том, что функцию надо разобрать безотлагательно. Если парсер обнаруживает открывающую скобку, сразу после которой следует объявление функции, он немедленно приступит к синтаксическому анализу функции. Мы можем помочь парсеру, применяя этот приём при описании функций, которые нужно выполнить как можно скорее.<br/>
<br/>
Предположим, у нас имеется функция <code>foo</code>:<br/>
<br/>
<pre><code class="plaintext">function foo(x) {
    return x * 10;
}</code></pre><br/>
Так как в этом фрагменте кода нет явного указания на то, что эту функцию планируется выполнить немедленно, браузер выполнит лишь её ленивый синтаксический анализ. Однако мы уверены в том, что эта функция понадобится нам очень скоро, поэтому мы можем прибегнуть к следующему приёму.<br/>
<br/>
Для начала сохраним функцию в переменной:<br/>
<br/>
<pre><code class="plaintext">var foo = function foo(x) {
    return x * 10;
};</code></pre><br/>
Обратите внимание на то, что первоначальное имя функции, находящееся между ключевым словом <code>function</code> и открывающейся скобкой, мы оставили. Нельзя сказать, что это совершенно необходимо, но рекомендуется поступать именно так, так как, если при работе функции будет выдано исключение, в данных трассировки стека можно будет увидеть имя функции, а не <code>&lt;anonymous></code>.<br/>
<br/>
После вышеописанного изменения парсер продолжит использовать ленивый синтаксический анализ. Для того чтобы это изменить, достаточно одной небольшой детали. Функцию надо заключить в скобки:<br/>
<br/>
<pre><code class="plaintext">var foo = (function foo(x) {
    return x * 10;
});</code></pre><br/>
Теперь, когда парсер обнаружит открывающую скобку перед ключевым словом <code>function</code>, он немедленно приступит к разбору этой функции.<br/>
<br/>
Подобные оптимизации может оказаться непросто выполнять вручную, так как для этого нужно знать то, в каких случаях парсер будет выполнять ленивый синтаксический анализ, а в каких — полный. Кроме того, для этого нужно потратить время на принятие решения о том, нуждается ли конкретная функция в как можно более быстрой готовности к работе или нет.<br/>
<br/>
Программистам, наверняка, не захочется взваливать на себя всю эту дополнительную работу. Кроме того, что не мене важно чем всё то, о чём уже было сказано, код, обработанный таким образом, будет сложнее читать и понимать. В этой ситуации нам на помощь готовы прийти специальные программные пакеты вроде Optimize.js. Их основная цель заключается в оптимизации времени первоначальной загрузки исходного кода на JS. Они выполняют статический анализ кода и модифицируют его так, чтобы функции, которые нужно выполнить как можно скорее, были бы заключены в скобки, что приводит к тому, что браузер немедленно займётся их разбором и подготовкой к выполнению.<br/>
<br/>
Итак, предположим, что мы программируем, ни о чём особо не задумываясь, и у нас имеется следующий фрагмент кода:<br/>
<br/>
<pre><code class="plaintext">(function() {
    console.log('Hello, World!');
})();</code></pre><br/>
Выглядит это вполне нормально, работает так как ожидается, выполняется быстро, так как парсер находит открывающую скобку перед ключевым словом <code>function</code>. Пока всё отлично. Конечно, прежде чем всё это попадёт в продакшн, код надо минифицировать для того, чтобы уменьшить его размер:<br/>
<br/>
<pre><code class="plaintext">!function(){console.log('Hello, World!')}();</code></pre><br/>
Вроде и тут всё нормально, код работает так же, как работал раньше. Однако если присмотреться, окажется что кое-чего в этом минифицированном фрагменте исходной программы не хватает. <br/>
<br/>
Минификатор убрал скобки, в которые было заключено объявление функции, поместив в начало строки восклицательный знак. Это означает, что парсер данную строчку пропустит, то, что она будет обработана с использованием ленивого синтаксического анализа. Более того, для того, чтобы выполнить эту функцию, системе придётся выполнять полный анализ сразу после ленивого. Всё это приведёт к тому, что такой вот минифицированный код будет работать медленнее, чем его исходный вариант. Теперь пришло время вспомнить об инструментах вроде вышеупомянутого Optimize.js. Если обработать минифицированный код с помощью Optimize.js, на выходе получится следующее:<br/>
<br/>
<pre><code class="plaintext">!(function(){console.log('Hello, World!')})();</code></pre><br/>
Это уже больше похоже на то, что нам нужно. Мы получаем и минификацию, и оптимизацию кода. Текст программы занимает меньше места на диске, а парсеру понятно, какие фрагменты нужно разбирать полностью и как можно скорее, а какие — используя методику ленивого синтаксического анализа.<br/>
<br/>
<h2><font color="#3AC1EF">Предварительная компиляция</font></h2><br/>
Как видите, подготовка JS-кода к работе — дело, требующее немалых системных ресурсов. Почему бы не выполнять всё это на сервере? В конце концов, гораздо лучше один раз подготовить программу к выполнению и передавать то, что получилось, клиентам, нежели принуждать каждую клиентскую систему каждый раз обрабатывать исходный код. На самом деле, эта возможность сейчас обсуждается, в частности, вопрос заключается в том, должны ли браузерные JS-движки предлагать механизмы выполнения предварительно скомпилированных скриптов, чтобы освободить браузеры от задач по подготовке кода к выполнению. В целом, идея заключается в том, чтобы у нас был некий серверный инструмент, умеющий генерировать байт-код, который достаточно передать клиенту по сети и выполнить. Это даст значительное сокращение времени подготовки веб-страниц к работе. И хотя выглядит подобный механизм довольно соблазнительно, на самом деле, не всё так просто. Подготовка кода к работе на сервере может произвести обратный эффект, так как объём передаваемых данных, вероятно, возрастёт, может возникнуть необходимость в подписывании кода и в его проверке для целей обеспечения безопасности. Кроме того, JS-движки развиваются в уже сформировавшемся русле, в частности, команда разработчиков V8 работает над внутренними механизмами движка, направленными на то, чтобы избавиться от повторного парсинга. Подобные подходы к оптимизации на стороне клиента могут сделать предварительную компиляцию на сервере уже не столь привлекательной.<br/>
<br/>
<h2><font color="#3AC1EF">Советы по оптимизации</font></h2><br/>
Вот несколько рекомендаций, которыми вы можете воспользоваться для оптимизации веб-приложений:<br/>
<br/>
<ul>
<li>Проверьте зависимости проекта. Избавьтесь от всего ненужного.</li>
<li>Разделите код на небольшие фрагменты вместо того, чтобы складывать его в один большой файл.</li>
<li>Откладывайте, в тех ситуациях, когда это возможно, загрузку JS-скриптов. При обработке текущего маршрута пользователю можно выдавать только тот код, который необходим для нормальной работы, и ничего лишнего.</li>
<li>Используйте инструменты разработчика и средства вроде DeviceTiming для того, чтобы находить узкие места своих проектов.</li>
<li>Используйте средства вроде Optimize.js для того, чтобы помочь парсерам определиться с тем, какие фрагменты кода им нужно обработать как можно скорее.</li>
</ul><br/>
<h2><font color="#3AC1EF">Итоги</font></h2><br/>
Автор этого материала говорит, что в его компании, которая занимается разработкой системы <a href="https://www.sessionstack.com/">SessionStack</a>, предназначенной для мониторинга и записи того, что происходит на веб-страницах, вышеописанные приёмы оптимизации начали использовать сравнительно недавно. Это позволяет им сделать так, чтобы код приложения быстрее загружался и готовился к работе. Чем быстрее это происходит — тем приятнее пользователям будет работать с системой. Пожалуй, обеспечение удобства работы пользователей — это одна из задач, которую стремятся решить разработчики любого веб-проекта, и то, о чём шла речь в этом материале, вполне способно помочь в решении этой задачи.<br/>
<br/>
<b>Уважаемые читатели!</b> Оптимизируете ли вы ваши веб-проекты с учётом скорости загрузки и разбора их JavaScript-кода?<br/>
<br/>
<a href="https://ruvds.com/ru-rub/#order"><div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png" data-src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"/></div></a></div></div></div> <!----> <!----></div> <!----> <!----></div> <!----> <div class="tm-article-presenter__meta"><div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BJavaScript%5D" class="tm-tags-list__link">JavaScript</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%5D" class="tm-tags-list__link">разработка</a></li> <!----></ul></div> <div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/companies/ruvds/articles/" class="tm-hubs-list__link router-link-active">Блог компании RUVDS.com</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/webdev/" class="tm-hubs-list__link">Веб-разработка</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/javascript/" class="tm-hubs-list__link">JavaScript</a></li> <!----></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div title="Всего голосов 25: ↑24 и ↓1" class="tm-votes-lever tm-article-rating__votes-switcher tm-votes-lever tm-votes-lever_appearance-article"><button title="Нравится" type="button" class="tm-votes-lever__button"><svg height="24" width="24" class="tm-svg-img tm-votes-lever__icon"><title>Голосование</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-vote"></use></svg></button> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-article"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_positive">
          +23
        </span></span></div> <button title="Не нравится" type="button" class="tm-votes-lever__button"><svg height="24" width="24" class="tm-svg-img tm-votes-lever__icon tm-votes-lever__icon_arrow-down"><title>Голосование</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-vote"></use></svg></button></div> <DIV class="v-portal" style="display:none;"></DIV> <!----></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    190
  </span></button> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/companies/ruvds/articles/415269/comments/" class="tm-article-comments-counter-link__link"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></div></div>  <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/companies/ruvds/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt height="40" src="//habrastorage.org/getpro/habr/company/a8a/d05/1a5/a8ad051a528365eeade6c64624231202.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/companies/ruvds/profile/" class="tm-company-snippet__title">RUVDS.com</a> <div class="tm-company-snippet__description">VDS/VPS-хостинг. Скидка 15% по коду <b>HABR15</b></div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://telegram.me/ruvds_community" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a><a href="https://vk.com/ru_vds" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://twitter.com/ru_vds" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/ru_vds/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt src="//habrastorage.org/getpro/habr/avatars/401/2df/cf0/4012dfcf007db186f14ef2c1eb32d672.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 1264 голоса " class="tm-counter-container tm-karma tm-karma"><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      434
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <div title="Рейтинг пользователя" class="tm-counter-container"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
          414.2
        </span></span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/ru_vds/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article">
          @ru_vds
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <!----> <!----> <div class="tm-article-blocks__comments"><div id="publication-comments" class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/companies/ruvds/articles/415269/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 5 
    </span></a> <!----></div></div></div>  <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!----></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!----></div> <div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!----> <!----> <!----> <!----> <!----></div> <!----></div></div> <!----></section> <div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2> </div> <!----></header> <div class="tm-block__body tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://ruvds.com" target="_blank" class="tm-company-basic-info__link">
      ruvds.com
    </a></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2016-03-18T05:43:01.000Z" title="2016-03-18, 08:43">18  марта  2016</time></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2015-07-26T21:00:00.000Z" title="2015-07-27, 00:00">27  июля  2015</time></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    11–30 человек
  </dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/ruvds/" class="tm-company-basic-info__link">
      ruvds
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----> <!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Ваш аккаунт
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/companies/ruvds/articles/415269/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/companies/ruvds/articles/415269/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Разделы
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/articles/" class="footer-menu__item-link">
                Статьи
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link router-link-active">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Информация
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Услуги
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">
                Корпоративный блог
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">
                Медийная реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">
                Нативные проекты
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">
                Образовательные программы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">
                Стартапам
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2023, </span> <span class="tm-copyright__name"><a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a></span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"415269":{"id":"415269","timePublished":"2018-06-26T08:42:23+00:00","isCorporative":true,"lang":"ru","titleHtml":"Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация","leadData":{"textHtml":"\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003E[Советуем почитать] Другие 19 частей цикла\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003EЧасть 1: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F337042\u002F\" rel=\"nofollow\"\u003EОбзор движка, механизмов времени выполнения, стека вызовов\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 2: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F337460\u002F\" rel=\"nofollow\"\u003EО внутреннем устройстве V8 и оптимизации кода\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 3: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F338150\u002F\" rel=\"nofollow\"\u003EУправление памятью, четыре вида утечек памяти и борьба с ними\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 4: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F340508\u002F\" rel=\"nofollow\"\u003EЦикл событий, асинхронность и пять способов улучшения кода с помощью async \u002F await\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 5: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F342346\u002F\" rel=\"nofollow\"\u003EWebSocket и HTTP\u002F2+SSE. Что выбрать?\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 6: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F343568\u002F\" rel=\"nofollow\"\u003EОсобенности и сфера применения WebAssembly\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 7: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F348424\u002F\" rel=\"nofollow\"\u003EВеб-воркеры и пять сценариев их использования\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 8: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F349858\u002F\" rel=\"nofollow\"\u003EСервис-воркеры\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 9: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F350486\u002F\" rel=\"nofollow\"\u003EВеб push-уведомления\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 10: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F351256\u002F\" rel=\"nofollow\"\u003EОтслеживание изменений в DOM с помощью MutationObserver\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 11: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F351802\u002F\" rel=\"nofollow\"\u003EДвижки рендеринга веб-страниц и советы по оптимизации их производительности\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 12: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F354070\u002F\"\u003EСетевая подсистема браузеров, оптимизация её производительности и безопасности\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 13: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F354438\u002F\"\u003EАнимация средствами CSS и JavaScript\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 14: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415269\u002F\"\u003EКак работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 15: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415377\u002F\"\u003EКак работает JS: классы и наследование, транспиляция в Babel и TypeScript\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 16: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415505\u002F\"\u003EКак работает JS: системы хранения данных\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 17: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415881\u002F\"\u003EКак работает JS: технология Shadow DOM и веб-компоненты\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 18: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F416821\u002F\"\u003EКак работает JS: WebRTC и механизмы P2P-коммуникаций\u003C\u002Fa\u003E\u003Cbr\u003E\r\nЧасть 19: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F419831\u002F\"\u003EКак работает JS: пользовательские элементы\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u003E\r\nВсе мы знаем о том, что JavaScript-код веб-проектов может разрастаться до прямо-таки огромных размеров. А чем больше размер кода — тем дольше браузер будет его загружать. Но проблема тут не только во времени передачи данных по сети. После того, как программа загрузится, её ещё надо распарсить, скомпилировать в байт-код, и, наконец, выполнить. Сегодня мы представляем вашему вниманию перевод 14 части серии материалов об экосистеме JavaScript. А именно, речь пойдёт о синтаксическом анализе JS-кода, о том, как строятся абстрактные синтаксические деревья, и о том, как программист может повлиять на эти процессы, добившись повышения скорости работы своих приложений.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415269\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F68b\u002Fb2c\u002F231\u002F68bb2c231dd5b82bd35e97ceb36becef.jpg\" alt=\"image\"\u003E\u003C\u002Fa\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","typeOf":"system","title":"Перевод","data":{"originalAuthorName":"Lachezar Nickolov","originalUrl":"https:\u002F\u002Fblog.sessionstack.com\u002Fhow-javascript-works-parsing-abstract-syntax-trees-asts-5-tips-on-how-to-minimize-parse-time-abfcf7e8a0c8"}}],"author":{"id":"1220775","alias":"ru_vds","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F401\u002F2df\u002Fcf0\u002F4012dfcf007db186f14ef2c1eb32d672.png","speciality":"Пользователь","scoreStats":{"score":434,"votesCount":1264},"rating":414.2,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":null},"statistics":{"commentsCount":5,"favoritesCount":190,"readingCount":42283,"score":23,"votesCount":25,"votesCountPlus":24,"votesCountMinus":1},"hubs":[{"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false,"relatedData":null},{"id":"91","alias":"webdev","type":"collective","title":"Веб-разработка","titleHtml":"Веб-разработка","isProfiled":true,"relatedData":null},{"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cdiv class=\"spoiler\" role=\"button\" tabindex=\"0\"\u003E\n                        \u003Cb class=\"spoiler_title\"\u003E[Советуем почитать] Другие 19 частей цикла\u003C\u002Fb\u003E\n                        \u003Cdiv class=\"spoiler_text\"\u003EЧасть 1: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F337042\u002F\"\u003EОбзор движка, механизмов времени выполнения, стека вызовов\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 2: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F337460\u002F\"\u003EО внутреннем устройстве V8 и оптимизации кода\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 3: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F338150\u002F\"\u003EУправление памятью, четыре вида утечек памяти и борьба с ними\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 4: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F340508\u002F\"\u003EЦикл событий, асинхронность и пять способов улучшения кода с помощью async \u002F await\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 5: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F342346\u002F\"\u003EWebSocket и HTTP\u002F2+SSE. Что выбрать?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 6: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F343568\u002F\"\u003EОсобенности и сфера применения WebAssembly\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 7: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F348424\u002F\"\u003EВеб-воркеры и пять сценариев их использования\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 8: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F349858\u002F\"\u003EСервис-воркеры\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 9: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F350486\u002F\"\u003EВеб push-уведомления\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 10: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F351256\u002F\"\u003EОтслеживание изменений в DOM с помощью MutationObserver\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 11: \u003Ca href=\"https:\u002F\u002Fhabrahabr.ru\u002Fcompany\u002Fruvds\u002Fblog\u002F351802\u002F\"\u003EДвижки рендеринга веб-страниц и советы по оптимизации их производительности\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 12: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F354070\u002F\"\u003EСетевая подсистема браузеров, оптимизация её производительности и безопасности\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 13: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F354438\u002F\"\u003EАнимация средствами CSS и JavaScript\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 14: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415269\u002F\"\u003EКак работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 15: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415377\u002F\"\u003EКак работает JS: классы и наследование, транспиляция в Babel и TypeScript\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 16: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415505\u002F\"\u003EКак работает JS: системы хранения данных\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 17: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415881\u002F\"\u003EКак работает JS: технология Shadow DOM и веб-компоненты\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 18: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F416821\u002F\"\u003EКак работает JS: WebRTC и механизмы P2P-коммуникаций\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nЧасть 19: \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F419831\u002F\"\u003EКак работает JS: пользовательские элементы\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\n                    \u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nВсе мы знаем о том, что JavaScript-код веб-проектов может разрастаться до прямо-таки огромных размеров. А чем больше размер кода — тем дольше браузер будет его загружать. Но проблема тут не только во времени передачи данных по сети. После того, как программа загрузится, её ещё надо распарсить, скомпилировать в байт-код, и, наконец, выполнить. Сегодня мы представляем вашему вниманию перевод 14 части серии материалов об экосистеме JavaScript. А именно, речь пойдёт о синтаксическом анализе JS-кода, о том, как строятся абстрактные синтаксические деревья, и о том, как программист может повлиять на эти процессы, добившись повышения скорости работы своих приложений.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F415269\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F68b\u002Fb2c\u002F231\u002F68bb2c231dd5b82bd35e97ceb36becef.jpg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F68b\u002Fb2c\u002F231\u002F68bb2c231dd5b82bd35e97ceb36becef.jpg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EКак устроены языки программирования\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПрежде чем говорить об абстрактных синтаксических деревьях, остановимся на том, как устроены языки программирования. Вне зависимости от того, какой именно язык вы используете, вам всегда приходится применять некие программы, которые принимают исходный код и преобразуют его в нечто такое, что содержит конкретные команды для машин. В роли таких программ выступают либо интерпретаторы, либо компиляторы. Неважно, пишете ли вы на интерпретируемом языке (JavaScript, Python, Ruby), или на компилируемом (C#, Java, Rust), ваш код, представляющий собой обычный текст, всегда будет проходить этап парсинга, то есть — превращения обычного текста в структуру данных, которая называется абстрактным синтаксическим деревом (Abstract Syntax Tree, AST).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАбстрактные синтаксические деревья не только дают структурированное представление исходного кода, они, кроме того, играют важнейшую роль в семантическом анализе, в ходе которого компилятор проверяет правильность программных конструкций и корректность использования их элементов. После формирования AST и выполнения проверок эта структура используется для генерирования байт-кода или машинного кода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EПрименение абстрактных синтаксических деревьев\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nАбстрактные синтаксические деревья используются не только в интерпретаторах и компиляторах. Они, в мире компьютеров, оказываются полезными и во многих других областях. Один из наиболее часто встречающихся вариантов их применения — статический анализ кода. Статические анализаторы не выполняют передаваемый им код. Однако, несмотря на это, им нужно понимать структуру программ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПредположим, вы хотите разработать инструмент, который находит в коде часто встречающиеся структуры. Отчёты такого инструмента помогут в рефакторинге, позволят уменьшить дублирование кода. Сделать это можно, пользуясь обычным сравнением строк, но такой подход окажется весьма примитивным, возможности его будут ограниченными. На самом деле, если вы хотите создать подобный инструмент, вам не нужно писать собственный парсер для JavaScript. Существует множество опенсорсных реализаций подобных программ, которые полностью совместимы со спецификацией ECMAScript. Например — Esprima и Acorn. Существуют и инструменты, которые могут помочь в работе с тем, что генерируют парсеры, а именно, в работе с абстрактными синтаксическими деревьями. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАбстрактные синтаксические деревья, кроме того, широко используются при разработке транспиляторов. Предположим, вы решили разработать транспилятор, преобразующий код на Python в код на JavaScript. Подобный проект может быть основан на идее, в соответствии с которой используется транспилятор для создания абстрактного синтаксического дерева на основе Python-кода, которое, в свою очередь, преобразуется в код на JavaScript. Вероятно, тут вы зададитесь вопросом о том, как такое возможно. Всё дело в том, что абстрактные синтаксические деревья — это всего лишь альтернативный способ представления кода на некоем языке программирования. Прежде чем код преобразуется в AST, он выглядит как обычный текст, при написании которого следуют определённым правилам, которые формируют язык. После парсинга этот код превращается в древовидную структуру, которая содержит ту же информацию, что и исходный текст программы. В результате можно осуществить не только переход от исходного кода к AST, но и обратное преобразование, превратив абстрактное синтаксическое дерево в текстовое представление кода программы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EПарсинг JavaScript-кода\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПоговорим о том, как строятся абстрактные синтаксические деревья. В качестве примера рассмотрим простую JavaScript-функцию:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Efunction foo(x) {\n    if (x \u003E 10) {\n        var a = 2;\n        return a * x;\n    }\n\n    return x + 10;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПарсер создаст абстрактное синтаксическое дерево, которое схематично представлено на следующем рисунке.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F1ce\u002Fcdb\u002Fe7c\u002F1cecdbe7c1c1b12fc4b47994e85a443c.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F1ce\u002Fcdb\u002Fe7c\u002F1cecdbe7c1c1b12fc4b47994e85a443c.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EАбстрактное синтаксическое дерево\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбратите внимание на то, что это — упрощённое представление результатов работы парсера. Настоящее абстрактное синтаксическое дерево выглядит гораздо сложнее. В данном случае наша главная цель — получить представление о том, во что, в первую очередь, превращается исходный код прежде чем он будет выполнен. Если вам интересно взглянуть на то, как выглядит реальное абстрактное синтаксическое дерево — воспользуйтесь сайтом \u003Ca href=\"https:\u002F\u002Fastexplorer.net\u002F\"\u003EAST Explorer\u003C\u002Fa\u003E. Для того, чтобы сгенерировать AST для некоего фрагмента JS-кода, его достаточно поместить в соответствующее поле на странице.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВозможно, тут у вас возникнет вопрос о том, зачем программисту знать о том, как работает JS-парсер. В конце концов, парсить и выполнять код — это задача браузера. В каком-то смысле вы правы. На рисунке ниже показаны затраты времени, требующиеся некоторым известным веб-проектам на выполнение различных шагов в процессе выполнения JS-кода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрисмотритесь к этому рисунку, возможно, вы увидите там кое-что интересное.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Flh5.googleusercontent.com\u002FBqI2_WWk6ZGChdJPvMfxadXNLROXz8AieUiIGQahSnw46K0yQngJ7GfVGFSEUOQRIhLWJWRxXMPXQezeKpvnXVvQp5OcD_6jKslg-X8KiepJvDXt9CBprSCZO2oux7FLXFuFJ_-WWuW10mJx4Q\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F38e\u002Ff77\u002Fc59\u002F38ef77c59ab8118513c901e8d76a473e.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F38e\u002Ff77\u002Fc59\u002F38ef77c59ab8118513c901e8d76a473e.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EВременные затраты на выполнение JS-кода\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВидите? Если нет — посмотрите ещё раз. Собственно говоря, речь идёт о том, что, в среднем, браузеры тратят 15-20% времени на парсинг JS-кода. И это — не некие условные данные. Перед вами — статистические сведения о работе реальных веб-проектов, которые так или иначе используют JavaScript. Возможно, показатель в 15% может показаться вам не таким уж и большим, но, поверьте, это много. Типичное одностраничное приложение загружает примерно 0.4 Мб JavaScript-кода, а чтобы распарсить этот код браузеру надо примерно 370 мс. Опять же, вы можете сказать, что в этом нет ничего страшного. И да, само по себе это немного. Однако не стоит забывать о том, что это — лишь время, которое нужно на то, чтобы разобрать код и превратить его в AST. Сюда не входит время, необходимое на выполнение кода, или время, которое нужно на решение других задач, сопутствующих загрузке страницы, например — задач обработки HTML и CSS и \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fcompany\u002Fruvds\u002Fblog\u002F351802\u002F\"\u003Eрендеринга страницы\u003C\u002Fa\u003E. Причём, речь тут идёт лишь о настольных браузерах. В случае с мобильными системами всё ещё хуже. В частности, время парсинга одного и того же кода на мобильных устройствах может быть в 2-5 раз больше, чем на настольных. Взгляните на следующий рисунок.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Flh3.googleusercontent.com\u002FKBomjEemha-HSV2unKD-mdpJVMD3UrGZgjZ9iwDLe9xrWxKplHberV72A4WZbTjXvtXwDpZ_12ewJmXXyfG5xSxIYKqQODV4P69ePr4PccJ5ENEOCtuZAgPlfK6YcxlYM0vg_uJZr4MwKRfZNw\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F13a\u002Fa77\u002F456\u002F13aa774565ef8c320d2cfbac32476a45.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F13a\u002Fa77\u002F456\u002F13aa774565ef8c320d2cfbac32476a45.jpg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EВремя парсинга 1 Мб JS-кода на различных устройствах\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗдесь показано время, необходимое для разбора 1 Мб JS-кода на различных мобильных и настольных устройствах.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКроме того, веб-приложения постоянно усложняются, на сторону клиента переносится решение всё большего количества задач. Направлено всё это на то, чтобы улучшить ощущения пользователей от работы с веб-сайтами, чтобы приблизить эти ощущения к тем, которые пользователи испытывают, взаимодействуя с традиционными приложениями. Несложно выяснить то, насколько сильно всё это воздействует на веб-проекты. Для этого достаточно открыть в браузере инструменты разработчика, зайти на какой-нибудь современный сайт и посмотреть, сколько времени тратится на парсинг кода, на компиляцию, и на всё остальное, происходящее в браузере при подготовке страницы к работе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F4c1\u002Fde3\u002F225\u002F4c1de32251846a5a0416980c3187ff61.jpg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F4c1\u002Fde3\u002F225\u002F4c1de32251846a5a0416980c3187ff61.jpg\" data-blurred=\"true\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EАнализ сайта с помощью инструментов разработчика в браузере\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nК несчастью, мобильные браузеры не обладают подобными инструментами. Однако, это не означает, что мобильные версии сайтов невозможно анализировать. Тут нам на помощь придут инструменты вроде \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fdanielmendel\u002FDeviceTiming\"\u003EDeviceTiming\u003C\u002Fa\u003E. С помощью DeviceTiming можно измерить время, необходимое для парсинга и выполнения скриптов в управляемых окружениях. Работает это благодаря помещению локальных скриптов в окружение, формируемое вспомогательным кодом, что приводит к тому, что каждый раз, когда страница загружается с различных устройств, у нас появляется возможность локально измерить время парсинга и выполнения кода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EОптимизация парсинга и JS-движки\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nJS-движки делают много полезного для того, чтобы избежать ненужной работы и оптимизировать процессы обработки кода. Вот несколько примеров.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДвижок V8 поддерживает потоковую передачу скриптов и кэширование кода. Под потоковой передачей в данном случае понимается то, что система занимается парсингом скриптов, загружающихся асинхронно, и скриптов, выполнение которых отложено, в отдельном потоке, начиная это делать с момента начала загрузки кода. Это ведёт к тому, что парсинг завершается практически одновременно с завершением загрузки скрипта, что даёт примерно 10% уменьшение времени, необходимого на подготовку страниц к работе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nJavaScript-код обычно компилируется в байт-код при каждом посещении страницы. Этот байт-код, однако, теряется после того, как пользователь переходит на другую страницу. Происходит это из-за того, что скомпилированный код сильно зависит от состояния и контекста системы во время компиляции. Для того чтобы улучшить ситуацию в Chrome 42 появилась поддержка кэширования байт-кода. Благодаря этому новшеству скомпилированный код хранится локально, в результате, когда пользователь возвращается на уже посещённую страницу, для подготовки её к работе не нужно выполнять загрузку, парсинг и компиляцию скриптов. Это позволяет Chrome сэкономить примерно 40% времени на задачах парсинга и компиляции. Кроме того, в случае с мобильными устройствами, это ведёт к экономии заряда их аккумуляторов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДвижок \u003Ca href=\"https:\u002F\u002Fdev.opera.com\u002Fblog\u002Fcarakan\u002F\"\u003ECarakan\u003C\u002Fa\u003E, который применялся в браузере Opera и уже довольно давно заменён на V8, мог повторно использовать результаты компиляции уже обработанных скриптов. При этом не требовалось, чтобы эти скрипты были бы подключены к одной и той же странице или даже были бы загружены с одного домена. Эта техника кэширования, на самом деле, весьма эффективна и позволяет полностью отказаться от шага компиляции. Она полагается на типичные сценарии поведения пользователей, на то, как люди работают с веб-ресурсами. А именно, когда пользователь следует определённой последовательности действий, работая с веб-приложением, загружается один и тот же код.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИнтерпретатор \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FMozilla\u002FProjects\u002FSpiderMonkey\"\u003ESpiderMonkey\u003C\u002Fa\u003E, используемый в FireFox, не занимается кэшированием всего подряд. Он поддерживает систему мониторинга, которая подсчитывает количество вызовов определённого скрипта. На основе этих показателей определяются участки кода, которые нуждаются в оптимизации, то есть — те, на которые приходится максимальная нагрузка.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКонечно, некоторые разработчики браузеров могут решить, что кэширование их продуктам и вовсе не нужно. Так, \u003Ca href=\"http:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMaciej_Stachowiak\"\u003EМасей Стачовяк\u003C\u002Fa\u003E, ведущий разработчик браузера Safari, говорит, что Safari не занимается кэшированием скомпилированного байт-кода. Возможность кэширования рассматривалась, но она до сих пор не реализована, так как генерация кода занимает менее 2% общего времени выполнения программ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭти оптимизации не влияют напрямую на парсинг исходного кода на JS. В ходе их применения делается всё возможное, чтобы, в определённых случаях, полностью пропустить этот шаг. Каким бы быстрым ни был парсинг, он, всё же, занимает некоторое время, а полное отсутствие парсинга — это, пожалуй, пример идеальной оптимизации.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EСокращение времени подготовки веб-приложений к работе\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nКак мы выяснили выше, хорошо было бы свести необходимость в парсинге скриптов к минимуму, но совсем избавиться от него нельзя, поэтому поговорим о том, как сократить время, необходимое для подготовки веб-приложений к работе. На самом деле, для этого можно сделать очень много всего. Например, можно минимизировать объём JS-кода, входящего в приложение. Код маленького объёма, готовящий страницу к работе, можно быстрее разобрать, да и его выполнение, вероятнее всего, займёт меньше времени, чем у кода более объёмного.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля того чтобы сократить объём кода, можно организовать загрузку на страницу только того, что ей действительно необходимо, а не некоего огромного куска кода, в который входит абсолютно всё, нужное для веб-проекта в целом. Так, например, паттерн \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ffundamentals\u002Fperformance\u002Fprpl-pattern\u002F\"\u003EPRPL\u003C\u002Fa\u003E продвигает именно такой подход к загрузке кода. В качестве альтернативного варианта можно проверить зависимости и посмотреть, есть ли в них что-то избыточное, такое, что приводит лишь к неоправданному разрастанию кодовой базы. На самом деле, тут мы затронули большую тему, достойную отдельного материала. Вернёмся к парсингу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, цель данного материала заключается в обсуждении методик, позволяющих веб-разработчику помочь парсеру быстрее делать его работу. Такие методики существуют. Современные JS-парсеры используют эвристические алгоритмы для того, чтобы определить, понадобится ли выполнить некий фрагмент кода как можно скорее, или его нужно будет выполнить позже. Основываясь на этих предсказаниях, парсер либо полностью анализирует фрагмент кода, применяя алгоритм жадного синтаксического анализа (eager parsing), либо использует ленивый алгоритм синтаксического анализа (lazy parsing). При полном анализе разбираются функции, которые нужно скомпилировать как можно скорее. В ходе этого процесса выполняется решение трёх основных задач: построение AST, создание иерархии областей видимости и поиск синтаксических ошибок. Ленивый анализ, с другой стороны, используется только для функций, которые пока не нуждаются в компиляции. Здесь не создаётся AST и не выполняется поиск ошибок. При таком подходе лишь создаётся иерархия областей видимости, что позволяет сэкономить примерно половину времени в сравнении с обработкой функций, которые нужно выполнить как можно скорее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа самом деле, концепция это не новая. Даже устаревшие браузеры вроде IE9 поддерживают подобные подходы к оптимизации, хотя, конечно, современные системы ушли далеко вперёд.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРазберём пример, иллюстрирующий работу этих механизмов. Предположим, у нас имеется следующий JS-код:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Efunction foo() {\n    function bar(x) {\n        return x + 10;\n    }\n\n    function baz(x, y) {\n        return x + y;\n    }\n\n    console.log(baz(100, 200));\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nКак и в предыдущем примере, код попадает в парсер, который выполняет его синтаксический анализ и формирует AST. В результате парсер представляет код, состоящий из следующих основных частей (на функцию \u003Ccode\u003Efoo\u003C\u002Fcode\u003E обращать внимания не будем):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EОбъявление функции \u003Ccode\u003Ebar\u003C\u002Fcode\u003E, которая принимает один аргумент (\u003Ccode\u003Ex\u003C\u002Fcode\u003E). Эта функция имеет одну команду возврата, она возвращает результат сложения \u003Ccode\u003Ex\u003C\u002Fcode\u003E и 10.\u003C\u002Fli\u003E\r\n\u003Cli\u003EОбъявление функции \u003Ccode\u003Ebaz\u003C\u002Fcode\u003E, которая принимает два аргумента (\u003Ccode\u003Ex\u003C\u002Fcode\u003E и \u003Ccode\u003Ey\u003C\u002Fcode\u003E). У неё тоже одна команда возврата, возвращает она результат сложения \u003Ccode\u003Ex\u003C\u002Fcode\u003E и \u003Ccode\u003Ey\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\r\n\u003Cli\u003EВыполнение вызова функции \u003Ccode\u003Ebaz\u003C\u002Fcode\u003E с двумя аргументами — 100 и 200.\u003C\u002Fli\u003E\r\n\u003Cli\u003EВыполнение вызова функции \u003Ccode\u003Econsole.log\u003C\u002Fcode\u003E с одним аргументом, которым является значение, возвращённое ранее вызванной функцией.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nВот как это выглядит.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F729\u002F2cf\u002F4ef\u002F7292cf4efde90158123451af4f487b1e.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F729\u002F2cf\u002F4ef\u002F7292cf4efde90158123451af4f487b1e.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EРезультат разбора кода примера без применения оптимизации\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоговорим о том, что здесь происходит. Парсер видит объявление функции \u003Ccode\u003Ebar\u003C\u002Fcode\u003E, объявление функции \u003Ccode\u003Ebaz\u003C\u002Fcode\u003E, вызов функции \u003Ccode\u003Ebaz\u003C\u002Fcode\u003E и вызов функции \u003Ccode\u003Econsole.log\u003C\u002Fcode\u003E. Очевидно, разбирая этот фрагмент кода, парсер столкнётся с задачей, выполнение которой никак не отразится на результатах выполнения данной программы. Речь идёт об анализе функции \u003Ccode\u003Ebar\u003C\u002Fcode\u003E. Почему анализ этой функции не несёт практической пользы? Всё дело в том, что функция \u003Ccode\u003Ebar\u003C\u002Fcode\u003E, как минимум, в представленном фрагменте кода, никогда не вызывается. Этот простой пример может показаться надуманным, но во множестве реальных приложений имеется большое количество функций, которые никогда не вызываются.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ подобной ситуации, вместо того, чтобы заниматься разбором функции \u003Ccode\u003Ebar\u003C\u002Fcode\u003E, мы можем просто сделать запись о том, что она объявлена, но нигде не используется. При этом настоящий парсинг этой функции производится тогда, когда в ней возникнет необходимость, непосредственно перед её выполнением. Естественно, при выполнении ленивого синтаксического анализа нужно обнаружить тело функции и сделать запись о её объявлении, но на этом работа заканчивается. Для такой функции не надо формировать абстрактное синтаксическое дерево, так как у системы нет сведений о том, что эту функцию планируется выполнять. Кроме того, не выделяется память из кучи, что обычно требует немалых системных ресурсов. Если в двух словах, то отказ от разбора ненужных функций ведёт к значительному повышению производительности кода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ результате, в предыдущем примере, настоящий парсер сформирует структуру, напоминающую следующую схему.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F15e\u002Fe9f\u002F761\u002F15ee9f761e509f1b578fdddcd56800eb.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F15e\u002Fe9f\u002F761\u002F15ee9f761e509f1b578fdddcd56800eb.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"#999999\"\u003EРезультат разбора кода примера с оптимизацией\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбратите внимание на то, что парсер сделал запись об объявлении функции \u003Ccode\u003Ebar\u003C\u002Fcode\u003E, но дальнейшим её разбором не занимался. Система не предприняла никаких усилий для анализа кода функции. В данном случае тело функции представляло собой команду возврата результата простых вычислений. Однако в большинстве реальных приложений код функций может быть гораздо более длинным и сложным, содержащим множество команд возврата, условия, циклы, команды объявления переменных и вложенных функций. Разбор всего этого, при условии, что такие функции никогда не вызываются, представляет собой пустую трату времени.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ вышеописанной концепции нет ничего сложного, но её практическая реализация — задача не из лёгких. Здесь мы рассмотрели очень простой пример, а, на самом деле, при принятии решения о том, будет ли некий фрагмент кода востребован в программе, нужно анализировать и функции, и циклы, и условные операторы, и объекты. В целом можно сказать, что парсеру нужно обработать и проанализировать абсолютно всё, что есть в программе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот, например, весьма распространённый паттерн реализации модулей в JavaScript:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Evar myModule = (function() {\n    \u002F\u002F Вся логика модуля\n    \u002F\u002F Возврат объекта модуля\n})();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nБольшинство современных JS-парсеров распознают этот паттерн, он для них является сигналом того, что код, расположенный внутри модуля, нужно полностью проанализировать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА что если бы парсеры всегда использовали ленивый синтаксический анализ? Это, к сожалению, не самая хорошая идея. Дело в том, что при таком подходе, если некий код надо выполнить как можно скорее, мы столкнёмся с замедлением работы системы. Парсер выполнит один проход ленивого синтаксического анализа, после чего тут же примется за полный анализ того, что нужно выполнить как можно скорее. Это приведёт к примерно 50% замедлению в сравнении с подходом, когда парсер сразу приступает к полному разбору самого важного кода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EОптимизация кода с учётом особенностей его разбора\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nТеперь, когда мы немного разобрались с тем, что происходит в недрах парсеров, пришло время подумать о том, что можно сделать для того, чтобы им помочь. Мы можем писать код так, чтобы синтаксический анализ функций производился в нужное нам время. Тут существует один паттерн, который понимают большинство парсеров. Он выражается в том, что функции заключают в скобки. Такая конструкция практически всегда сообщает парсеру о том, что функцию надо разобрать безотлагательно. Если парсер обнаруживает открывающую скобку, сразу после которой следует объявление функции, он немедленно приступит к синтаксическому анализу функции. Мы можем помочь парсеру, применяя этот приём при описании функций, которые нужно выполнить как можно скорее.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПредположим, у нас имеется функция \u003Ccode\u003Efoo\u003C\u002Fcode\u003E:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Efunction foo(x) {\n    return x * 10;\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТак как в этом фрагменте кода нет явного указания на то, что эту функцию планируется выполнить немедленно, браузер выполнит лишь её ленивый синтаксический анализ. Однако мы уверены в том, что эта функция понадобится нам очень скоро, поэтому мы можем прибегнуть к следующему приёму.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля начала сохраним функцию в переменной:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Evar foo = function foo(x) {\n    return x * 10;\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nОбратите внимание на то, что первоначальное имя функции, находящееся между ключевым словом \u003Ccode\u003Efunction\u003C\u002Fcode\u003E и открывающейся скобкой, мы оставили. Нельзя сказать, что это совершенно необходимо, но рекомендуется поступать именно так, так как, если при работе функции будет выдано исключение, в данных трассировки стека можно будет увидеть имя функции, а не \u003Ccode\u003E&lt;anonymous\u003E\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле вышеописанного изменения парсер продолжит использовать ленивый синтаксический анализ. Для того чтобы это изменить, достаточно одной небольшой детали. Функцию надо заключить в скобки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Evar foo = (function foo(x) {\n    return x * 10;\n});\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТеперь, когда парсер обнаружит открывающую скобку перед ключевым словом \u003Ccode\u003Efunction\u003C\u002Fcode\u003E, он немедленно приступит к разбору этой функции.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПодобные оптимизации может оказаться непросто выполнять вручную, так как для этого нужно знать то, в каких случаях парсер будет выполнять ленивый синтаксический анализ, а в каких — полный. Кроме того, для этого нужно потратить время на принятие решения о том, нуждается ли конкретная функция в как можно более быстрой готовности к работе или нет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрограммистам, наверняка, не захочется взваливать на себя всю эту дополнительную работу. Кроме того, что не мене важно чем всё то, о чём уже было сказано, код, обработанный таким образом, будет сложнее читать и понимать. В этой ситуации нам на помощь готовы прийти специальные программные пакеты вроде Optimize.js. Их основная цель заключается в оптимизации времени первоначальной загрузки исходного кода на JS. Они выполняют статический анализ кода и модифицируют его так, чтобы функции, которые нужно выполнить как можно скорее, были бы заключены в скобки, что приводит к тому, что браузер немедленно займётся их разбором и подготовкой к выполнению.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, предположим, что мы программируем, ни о чём особо не задумываясь, и у нас имеется следующий фрагмент кода:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E(function() {\n    console.log('Hello, World!');\n})();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВыглядит это вполне нормально, работает так как ожидается, выполняется быстро, так как парсер находит открывающую скобку перед ключевым словом \u003Ccode\u003Efunction\u003C\u002Fcode\u003E. Пока всё отлично. Конечно, прежде чем всё это попадёт в продакшн, код надо минифицировать для того, чтобы уменьшить его размер:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E!function(){console.log('Hello, World!')}();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВроде и тут всё нормально, код работает так же, как работал раньше. Однако если присмотреться, окажется что кое-чего в этом минифицированном фрагменте исходной программы не хватает. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМинификатор убрал скобки, в которые было заключено объявление функции, поместив в начало строки восклицательный знак. Это означает, что парсер данную строчку пропустит, то, что она будет обработана с использованием ленивого синтаксического анализа. Более того, для того, чтобы выполнить эту функцию, системе придётся выполнять полный анализ сразу после ленивого. Всё это приведёт к тому, что такой вот минифицированный код будет работать медленнее, чем его исходный вариант. Теперь пришло время вспомнить об инструментах вроде вышеупомянутого Optimize.js. Если обработать минифицированный код с помощью Optimize.js, на выходе получится следующее:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E!(function(){console.log('Hello, World!')})();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЭто уже больше похоже на то, что нам нужно. Мы получаем и минификацию, и оптимизацию кода. Текст программы занимает меньше места на диске, а парсеру понятно, какие фрагменты нужно разбирать полностью и как можно скорее, а какие — используя методику ленивого синтаксического анализа.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EПредварительная компиляция\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nКак видите, подготовка JS-кода к работе — дело, требующее немалых системных ресурсов. Почему бы не выполнять всё это на сервере? В конце концов, гораздо лучше один раз подготовить программу к выполнению и передавать то, что получилось, клиентам, нежели принуждать каждую клиентскую систему каждый раз обрабатывать исходный код. На самом деле, эта возможность сейчас обсуждается, в частности, вопрос заключается в том, должны ли браузерные JS-движки предлагать механизмы выполнения предварительно скомпилированных скриптов, чтобы освободить браузеры от задач по подготовке кода к выполнению. В целом, идея заключается в том, чтобы у нас был некий серверный инструмент, умеющий генерировать байт-код, который достаточно передать клиенту по сети и выполнить. Это даст значительное сокращение времени подготовки веб-страниц к работе. И хотя выглядит подобный механизм довольно соблазнительно, на самом деле, не всё так просто. Подготовка кода к работе на сервере может произвести обратный эффект, так как объём передаваемых данных, вероятно, возрастёт, может возникнуть необходимость в подписывании кода и в его проверке для целей обеспечения безопасности. Кроме того, JS-движки развиваются в уже сформировавшемся русле, в частности, команда разработчиков V8 работает над внутренними механизмами движка, направленными на то, чтобы избавиться от повторного парсинга. Подобные подходы к оптимизации на стороне клиента могут сделать предварительную компиляцию на сервере уже не столь привлекательной.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EСоветы по оптимизации\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВот несколько рекомендаций, которыми вы можете воспользоваться для оптимизации веб-приложений:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EПроверьте зависимости проекта. Избавьтесь от всего ненужного.\u003C\u002Fli\u003E\r\n\u003Cli\u003EРазделите код на небольшие фрагменты вместо того, чтобы складывать его в один большой файл.\u003C\u002Fli\u003E\r\n\u003Cli\u003EОткладывайте, в тех ситуациях, когда это возможно, загрузку JS-скриптов. При обработке текущего маршрута пользователю можно выдавать только тот код, который необходим для нормальной работы, и ничего лишнего.\u003C\u002Fli\u003E\r\n\u003Cli\u003EИспользуйте инструменты разработчика и средства вроде DeviceTiming для того, чтобы находить узкие места своих проектов.\u003C\u002Fli\u003E\r\n\u003Cli\u003EИспользуйте средства вроде Optimize.js для того, чтобы помочь парсерам определиться с тем, какие фрагменты кода им нужно обработать как можно скорее.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EИтоги\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nАвтор этого материала говорит, что в его компании, которая занимается разработкой системы \u003Ca href=\"https:\u002F\u002Fwww.sessionstack.com\u002F\"\u003ESessionStack\u003C\u002Fa\u003E, предназначенной для мониторинга и записи того, что происходит на веб-страницах, вышеописанные приёмы оптимизации начали использовать сравнительно недавно. Это позволяет им сделать так, чтобы код приложения быстрее загружался и готовился к работе. Чем быстрее это происходит — тем приятнее пользователям будет работать с системой. Пожалуй, обеспечение удобства работы пользователей — это одна из задач, которую стремятся решить разработчики любого веб-проекта, и то, о чём шла речь в этом материале, вполне способно помочь в решении этой задачи.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EУважаемые читатели!\u003C\u002Fb\u003E Оптимизируете ли вы ваши веб-проекты с учётом скорости загрузки и разбора их JavaScript-кода?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fruvds.com\u002Fru-rub\u002F#order\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Ffiles\u002F1ba\u002F550\u002Fd25\u002F1ba550d25e8846ce8805de564da6aa63.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Ffiles\u002F1ba\u002F550\u002Fd25\u002F1ba550d25e8846ce8805de564da6aa63.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"JavaScript"},{"titleHtml":"разработка"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F415269\u002F18ab65b3b496fe3452e1d36a1d3940a3\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F415269\u002F18ab65b3b496fe3452e1d36a1d3940a3\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fruvds\\\u002Farticles\\\u002F415269\\\u002F\"},\"headline\":\"Как работает JS: абстрактные синтаксические деревья, парсинг и его оптимизация\",\"datePublished\":\"2018-06-26T11:42:23+03:00\",\"dateModified\":\"2020-05-17T14:16:39+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"ru_vds\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"[Советуем почитать] Другие 19 частей цикла                         Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Ч...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fruvds\\\u002Farticles\\\u002F415269\\\u002F#post-content-body\",\"about\":[\"c_ruvds\",\"h_webdev\",\"h_javascript\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F68b\\\u002Fb2c\\\u002F231\\\u002F68bb2c231dd5b82bd35e97ceb36becef.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F1ce\\\u002Fcdb\\\u002Fe7c\\\u002F1cecdbe7c1c1b12fc4b47994e85a443c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F38e\\\u002Ff77\\\u002Fc59\\\u002F38ef77c59ab8118513c901e8d76a473e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F13a\\\u002Fa77\\\u002F456\\\u002F13aa774565ef8c320d2cfbac32476a45.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F4c1\\\u002Fde3\\\u002F225\\\u002F4c1de32251846a5a0416980c3187ff61.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F729\\\u002F2cf\\\u002F4ef\\\u002F7292cf4efde90158123451af4f487b1e.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F15e\\\u002Fe9f\\\u002F761\\\u002F15ee9f761e509f1b578fdddcd56800eb.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Ffiles\\\u002F1ba\\\u002F550\\\u002Fd25\\\u002F1ba550d25e8846ce8805de564da6aa63.png\"]}","metaDescription":"[Советуем почитать] Другие 19 частей цикла Часть 1: Обзор движка, механизмов времени выполнения, стека вызовов Часть 2: О внутреннем устройстве V8 и оптимизации кода Часть 3: Управление памятью,...","mainImageUrl":null,"amp":false,"customTrackerLinks":[]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":null,"banner":null,"multiwidget":null,"readingTime":16,"complexity":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"myFeedFilter":{"complexity":"all","score":"all","types":["articles","posts","news"]},"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"ruvds":{"alias":"ruvds","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002Fa8a\u002Fd05\u002F1a5\u002Fa8ad051a528365eeade6c64624231202.png","titleHtml":"RUVDS.com","descriptionHtml":"VDS\u002FVPS-хостинг. Скидка 15% по коду \u003Cb\u003EHABR15\u003C\u002Fb\u003E","relatedData":null,"statistics":{"subscribersCount":88781,"rating":3071.55,"invest":null,"postsCount":3263,"threadsCount":0,"newsCount":166,"vacanciesCount":0,"employeesCount":67,"careerRating":null},"foundationDate":{"year":"2015","month":"07","day":"27"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fruvds.com","staffNumber":"11–30 человек","registrationDate":"2016-03-18T05:43:01+00:00","representativeUser":{"alias":"ruvds","fullname":null},"contacts":[{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fruvds_community","siteTitle":"Telegram: Contact @ruvds_community","favicon":"https:\u002F\u002Ftelegram.org\u002Fimg\u002Fwebsite_icon.svg?4"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fru_vds","siteTitle":"VK | VK","favicon":"https:\u002F\u002Fm.vk.com\u002Fimages\u002Ficons\u002Ffavicons\u002Ffav_logo.ico?9"},{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Fru_vds","siteTitle":null,"favicon":null}],"settings":{"analyticsSettings":[{"type":"ym","trackingId":"33905479"}],"branding":{"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fbranding\u002F46f\u002F1af\u002F202\u002F46f1af202dfd0682dd9ed2ff031f342b.jpg","linkUrl":"https:\u002F\u002Fruvds.com\u002F?utm_source=habr&utm_medium=banner&utm_campaign=promo&utm_content=link&?erid=LjN8KAR3S","pixelUrl":"https:\u002F\u002Fmc.yandex.ru\u002Fpixel\u002F7148861946507041993?rnd=%2525aw_random%2525"},"status":"active","isStartup":false,"hasActivePolls":false},"metadata":{"titleHtml":"RUVDS.com, Москва - VDS\u002FVPS-хостинг. Скидка 15% по коду \u003Cb\u003EHABR15\u003C\u002Fb\u003E с 27 июля 2015 г.","title":"RUVDS.com, Москва - VDS\u002FVPS-хостинг. Скидка 15% по коду HABR15 с 27 июля 2015 г.","keywords":["Читальный зал","Научно-популярное","DIY или Сделай сам","Программирование","Электроника для начинающих","ruvds_статьи","ruvds_перевод","ruvds_статьи_выходного_дня","ruvds_новости","разработка","linux","игры","diy","ruvds","программирование","хабрахабр","ruvds_переводы","javascript","arduino","python","статьи","новости","дайджест","ruvds_news","системное администрирование"],"descriptionHtml":"3 263 статьи от авторов компании RUVDS.com","description":"3 263 статьи от авторов компании RUVDS.com"},"aDeskSettings":null,"careerAlias":"ruvds","schoolAlias":null}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"flows":{"updates":{"countNewPostsBySubscription":null,"countNewThreadsBySubscription":null,"countNewNewsBySubscription":null,"countNewBySubscription":null,"countNewPostsAll":90,"countNewNewsAll":48,"countNewThreadsAll":10},"flows":[{"alias":"develop","id":"1","route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":"6","route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":"2","route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":"3","route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":"4","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":"7","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"query":{},"pathname":"\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F415269\u002F","path":"\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F415269\u002F","href":"\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F415269\u002F"}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"modal":{"modals":[]},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{"vacancies":"project-block-company-article"}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[{"id":"story-648","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff8d\u002F52f\u002Fad2\u002Ff8d52fad247a979a03935202b97c1ab1.png","title":"Хабр Карьера","link":"https:\u002F\u002Fu.habr.com\u002FN9x7w"},"title":"Покупательная способность разработчиков","lang":"ru","startTime":"2023-12-11T15:03:00+03:00","finishTime":"2023-12-18T15:03:47+03:00","slides":[{"id":"story-648_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7b4\u002F906\u002F047\u002F7b49060471ccfd6779abf773c3f97ec0.png","button":{"title":"Читать","link":"https:\u002F\u002Fu.habr.com\u002FN9x7w","colorType":"dark"}},{"id":"story-648_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F070\u002F29d\u002Ffd6\u002F07029dfd6fba94f304193fd5c205c817.png","button":null},{"id":"story-648_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F0d5\u002F8d2\u002F2ac\u002F0d58d22ac33b8e50ca5b24ccc57dcfaa.png","button":null},{"id":"story-648_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa07\u002Fbcc\u002F08f\u002Fa07bcc08fde04cff23fdb4cd889963e4.png","button":null},{"id":"story-648_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1b2\u002F650\u002F93b\u002F1b265093b7d8dfe43564cad286f30931.png","button":{"title":"Подробности","link":"https:\u002F\u002Fu.habr.com\u002FN9x7w","colorType":"dark"}}]},{"id":"story-646","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1f8\u002F307\u002F78f\u002F1f830778faec3f8900d943499dd356f8.png","title":"Хабр","link":null},"title":"Что почитать в блогах компаний","lang":"ru","startTime":"2023-12-07T10:30:00+03:00","finishTime":"2023-12-14T10:30:40+03:00","slides":[{"id":"story-646_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8c5\u002F140\u002Ff99\u002F8c5140f99ca778b20ba7679c1365c0a0.jpg","button":null},{"id":"story-646_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F97e\u002F63c\u002F8b8\u002F97e63c8b8eaefb5503fb435808c0905f.jpg","button":{"title":"Читать туториал","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Flanit\u002Farticles\u002F774410\u002F","colorType":"light"}},{"id":"story-646_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F242\u002Fa75\u002Ff1d\u002F242a75f1dfcd8b14d37ec7a094f6f5fc.jpg","button":{"title":"Противоядия","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Falfa\u002Farticles\u002F774264\u002F","colorType":"light"}},{"id":"story-646_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb79\u002F764\u002Faa4\u002Fb79764aa4fb4dc305ee60a8bce9faea5.jpg","button":{"title":"Раскопки","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F774070\u002F","colorType":"dark"}},{"id":"story-646_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F7c4\u002Fcf5\u002F89b\u002F7c4cf589bbc886a85361ea34c1930a99.jpg","button":{"title":"Тесты","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fwunderfund\u002Farticles\u002F776496\u002F","colorType":"light"}},{"id":"story-646_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6b2\u002Fe4d\u002F569\u002F6b2e4d569b5810cf9fb7fd8f288a72f7.jpg","button":{"title":"Решение","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fyandex\u002Farticles\u002F774462\u002F","colorType":"light"}},{"id":"story-646_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F509\u002F9f6\u002Fad7\u002F5099f6ad77e49016b6e17071ae0bcc67.jpg","button":{"title":"Визуализация","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F776672\u002F","colorType":"light"}},{"id":"story-646_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8b2\u002F5d3\u002Ffcf\u002F8b25d3fcf7b48da579f2457f61b357a4.jpg","button":{"title":"Дела минувшие","link":"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ffirst\u002Farticles\u002F774008\u002F","colorType":"light"}}]},{"id":"story-644","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbfb\u002Fd41\u002Feda\u002Fbfbd41eda9128251a65c05397e34a198.png","title":"Хабр Карьера","link":"https:\u002F\u002Fu.habr.com\u002FEoCyg"},"title":"Дайджест HR-событий в декабре","lang":"ru","startTime":"2023-12-06T12:31:00+03:00","finishTime":"2023-12-13T12:31:00+03:00","slides":[{"id":"story-644_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe0d\u002F6f8\u002F027\u002Fe0d6f80270652bc0607b30d934748387.png","button":{"title":"Подробнее","link":"https:\u002F\u002Fu.habr.com\u002FEoCyg","colorType":"dark"}},{"id":"story-644_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4c9\u002F14e\u002Fef8\u002F4c914eef8072fd7f3e4968cdb12b7a9b.png","button":null},{"id":"story-644_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F64a\u002F0b7\u002F6eb\u002F64a0b76ebdb72a9beec4911120ffb46e.png","button":{"title":"Смотреть события","link":"https:\u002F\u002Fu.habr.com\u002FEoCyg","colorType":"dark"}}]},{"id":"story-640","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3f2\u002F917\u002F723\u002F3f2917723f5f2fde262eee9e721b8176.png","title":"Хабр Карьера","link":"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=-ZYMCHVGul8"},"title":"Как создать компанию на Хабр Карьере","lang":"ru","startTime":"2023-12-04T11:31:00+03:00","finishTime":"2023-12-12T23:59:00+03:00","slides":[{"id":"story-640_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6b3\u002F25b\u002Fe90\u002F6b325be902a3576fff5ca426655c9efe.png","button":null},{"id":"story-640_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9c7\u002F054\u002F839\u002F9c7054839d9b84b3699a4f179850471b.png","button":null},{"id":"story-640_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6a9\u002F2b3\u002F70f\u002F6a92b370f28c492e8c1ee972a1a74c07.png","button":{"title":"Смотреть","link":"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=-ZYMCHVGul8","colorType":"dark"}}]},{"id":"story-638","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F459\u002F9cb\u002F53b\u002F4599cb53bad00b97377dadb42697cba8.png","title":"Хабр","link":"https:\u002F\u002Fu.habr.com\u002FUrHs2\u002F?erid=LatgBkpyD"},"title":"Путешествие в мир AI","lang":"ru","startTime":"2023-12-01T18:51:00+03:00","finishTime":"2023-12-15T23:57:00+03:00","slides":[{"id":"story-638_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F51d\u002Fbbc\u002F23d\u002F51dbbc23d87c0a479f296d046eb49ad3.jpg","button":{"title":"Смотреть","link":"https:\u002F\u002Fu.habr.com\u002FUrHs2\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe26\u002F1bc\u002Ff36\u002Fe261bcf369b80ee4fd9f63f9963884dc.jpg","button":{"title":"Развитие ИИ","link":"https:\u002F\u002Fu.habr.com\u002Faij_001\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6e4\u002F778\u002F973\u002F6e47789736d19f5302f279b21c680c8c.jpg","button":{"title":"Куда идёт ИИ","link":"https:\u002F\u002Fu.habr.com\u002Faij_02\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe9b\u002F95e\u002F9e6\u002Fe9b95e9e6a05ae1c3aaff0460715ec11.jpg","button":{"title":"GigaChat в бизнесе","link":"https:\u002F\u002Faij.ru\u002Fbroadcast?date=2023-11-23&streamName=%2525D0%252593%2525D0%2525BB%2525D0%2525B0%2525D0%2525B2%2525D0%2525BD%2525D1%25258B%2525D0%2525B9%25252520%2525D0%2525B7%2525D0%2525B0%2525D0%2525BB\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F881\u002F517\u002Fc5d\u002F881517c5db63ff0c19a8ba0608597105.jpg","button":{"title":"Сжать без потерь","link":"https:\u002F\u002Fu.habr.com\u002Faij_05\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F886\u002F1c1\u002F872\u002F8861c18720ea18e7f328b4f8e8184254.png","button":{"title":"ИИ в медицине","link":"https:\u002F\u002Fu.habr.com\u002Faij_06\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2c2\u002Fc05\u002Fda5\u002F2c2c05da5f9ecd7d47d7bc36dfcc001f.jpg","button":{"title":"Зашифровать","link":"https:\u002F\u002Fu.habr.com\u002Faij_07\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbe8\u002Fc09\u002F3be\u002Fbe8c093bef2c1e2238b94bedb0597f9d.jpg","button":{"title":"ИИ в Сбере","link":"https:\u002F\u002Fu.habr.com\u002Faij_08\u002F?erid=LatgBkpyD","colorType":"light"}},{"id":"story-638_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F148\u002Fcbf\u002F81c\u002F148cbf81cbc598af26c6b73dd4776eaa.jpg","button":{"title":"Химия и нейросети","link":"https:\u002F\u002Fu.habr.com\u002Faij_09https:\u002F\u002Fu.habr.com\u002Faij_09","colorType":"light"}},{"id":"story-638_10","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fb4e\u002Faa6\u002Fdc6\u002Fb4eaa6dc62754b10a5b2ad79342d50f8.jpg","button":{"title":"Будущее наступило","link":"https:\u002F\u002Faij.ru\u002Fbroadcast?date=2023-11-23&streamName=%2525D0%252593%2525D0%2525BB%2525D0%2525B0%2525D0%2525B2%2525D0%2525BD%2525D1%25258B%2525D0%2525B9%25252520%2525D0%2525B7%2525D0%2525B0%2525D0%2525BB\u002F?erid=LatgBkpyD","colorType":"light"}}]}]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"events":[{"id":"events_86","titleHtml":"Avito Analytics meetup #11","startDay":"2023-12-12","finishDay":"2023-12-12","startTime":"18:00","finishTime":"20:00","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F0r\u002Fjy\u002Fy7\u002F0rjyy7t1weo7een6xsq7zj4dvrq.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_aam","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EОдиннадцатый онлайн-митап для продуктовых аналитиков пройдёт 12&nbsp;декабря в&nbsp;18:00. Поговорим про продуктовые кейсы: как анализировать пользовательский негатив в&nbsp;Авито, как строить метрики качества данных в&nbsp;Яндекс.Картах, и&nbsp;о&nbsp;том, как с&nbsp;помощью эксперимента увеличить зоны экспресс-доставки в&nbsp;Самокате.\u003C\u002Fp\u003E"},{"id":"events_58","titleHtml":"Курс «Обеспечение электромагнитной совместимости изделий современной техники»","startDay":"2023-12-18","finishDay":"2023-12-20","startTime":"10:00","finishTime":"17:00","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fsl\u002Flv\u002Fe0\u002Fsllve0c9tpnoqnc20iidt7p9ue8.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_nsh","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EНовая Инженерная Школа проводит курс повышения квалификации, направленный на&nbsp;формирование или совершенствование профессиональных компетенций в&nbsp;области внутрисистемной электромагнитной совместимости (ЭМС) изделий современной техники для конструкторов радиоэлектронных средств (РЭС).\u003C\u002Fp\u003E \u003Cp\u003EНастоящая программа рассчитана на&nbsp;инженерно-технических работников с&nbsp;высшим профессиональным образованием, занимающихся конструкторским и&nbsp;технологическим проектированием радиоэлектронной, электронно-вычислительной аппаратуры, систем автоматики и&nbsp;управления и&nbsp;т.п. различного назначения, а&nbsp;также на&nbsp;руководителей среднего звена проектных организаций.\u003C\u002Fp\u003E \u003Cp\u003EТемы курса:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003EВведение в&nbsp;проблему ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EСертификационные требования ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EСхемотехнические методы обеспечения ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EПомехи в&nbsp;межсоединениях.\u003C\u002Fli\u003E \u003Cli\u003EЭкранирование аппаратуры.\u003C\u002Fli\u003E \u003Cli\u003EМощные электромагнитные воздействия на&nbsp;технические средства и&nbsp;методы защиты.\u003C\u002Fli\u003E \u003Cli\u003EОбеспечение радиационной стойкости современной РЭА.\u003C\u002Fli\u003E\u003C\u002Fol\u003E"},{"id":"events_78","titleHtml":"«Спокойно, договоримся!» — тренинг по переговорам и отношениям с клиентами в B2B","startDay":"2024-01-19","finishDay":"2024-01-20","startTime":"10:00","finishTime":"18:00","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fpb\u002F1w\u002Fob\u002Fpb1wobpfv_crqwdsb6eqiho4co0.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hflb2","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EПрокачаем навыки переговорщика и&nbsp;научим, как пересобрать отношения с&nbsp;клиентами в&nbsp;B2B. Мы&nbsp;не&nbsp;коучи, а&nbsp;топ-менеджеры с&nbsp;реальным опытом в&nbsp;большом бизнесе. За&nbsp;10+&nbsp;лет работы мы&nbsp;научились дружить с&nbsp;клиентами не&nbsp;только на&nbsp;начальном этапе, но&nbsp;и&nbsp;развивать зрелые проекты.\u003C\u002Fp\u003E\u003Cp\u003EТренинг будет полезен, если&nbsp;вы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eотвечаете за&nbsp;отношения с&nbsp;клиентами, ведение проектов и&nbsp;управление людьми,\u003C\u002Fli\u003E \u003Cli\u003Eмного и&nbsp;тесно работаете с&nbsp;заказчиками&nbsp;&mdash; внешними и&nbsp;внутренними,\u003C\u002Fli\u003E \u003Cli\u003Eработаете в&nbsp;b2b-продажах в&nbsp;IT.\u003C\u002Fli\u003E\u003C\u002Ful\u003E \u003Cp\u003EКто проведет:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EКонстантин Степанов, исполнительный директор HFLabs. За&nbsp;три года привлек 14&nbsp;крупных клиентов.\u003C\u002Fli\u003E \u003Cli\u003EНикита Назаров, технический директор HFLabs. Умеет делать так, чтобы клиент становился постоянным клиентом.\u003C\u002Fli\u003E\u003C\u002Ful\u003E \u003Cp\u003EСтань участником закрытого клуба по&nbsp;переговорам с&nbsp;разбором личных кейсов и&nbsp;поддержкой экспертов.\u003C\u002Fp\u003E"}]}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.4885d89d.js" defer></script><script src="https://assets.habr.com/habr-web/js/8838.01bea32e.js" defer></script><script src="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.00f967f9.js" defer></script>



    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
